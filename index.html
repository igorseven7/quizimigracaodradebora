<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz: Termômetro da Imigração - Dra. Debora Dias Sidoti</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Simple transition for screen fading */
        .screen {
            transition: opacity 0.5s ease-in-out;
        }
        .hidden {
            display: none;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4">

    <div class="w-full max-w-md mx-auto bg-white rounded-2xl shadow-xl overflow-hidden">
        
        <!-- Tela 1 & 2: Início do Quiz -->
        <div id="start-screen" class="screen p-6 md:p-8 text-center">
            <img src="https://i.imgur.com/8a5g8bS.jpeg" alt="Foto da Dra. Debora Dias Sidoti" class="w-24 h-24 mx-auto rounded-full object-cover border-4 border-white shadow-md -mt-16 mb-4" onerror="this.onerror=null;this.src='https://placehold.co/96x96/EFEFEF/333333?text=DDS';">
            <p class="text-sm text-gray-600 mb-2">Olá, eu sou a Dra. Debora Dias Sidoti.</p>
            <h1 class="text-2xl md:text-3xl font-bold text-gray-800">Termômetro da Imigração</h1>
            <p class="text-gray-600 mt-4">Sua situação nos EUA pode mudar a qualquer momento. Responda a 7 perguntas e receba um diagnóstico honesto da sua posição atual para saber se você está mais perto do Green Card ou da deportação.</p>
            <button id="start-button" class="mt-6 w-full bg-blue-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-blue-700 transition-colors duration-300 shadow-lg">
                Começar o Diagnóstico
            </button>
        </div>

        <!-- Tela 3: Perguntas do Quiz -->
        <div id="quiz-screen" class="screen hidden">
            <div class="p-6 md:p-8">
                <div class="flex items-center justify-between mb-4">
                    <p id="question-counter" class="text-sm font-medium text-blue-600"></p>
                    <button id="back-button" class="text-sm text-gray-500 hover:text-gray-800">&larr; Voltar</button>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2.5 mb-6">
                    <div id="progress-bar" class="bg-blue-600 h-2.5 rounded-full" style="width: 0%"></div>
                </div>
                <h2 id="question-text" class="text-xl font-semibold text-gray-800 mb-6 min-h-[80px]"></h2>
                <div id="answers-container" class="space-y-3">
                    <!-- Respostas serão inseridas aqui pelo JavaScript -->
                </div>
            </div>
        </div>

        <!-- Tela 4: Resultado do Quiz -->
        <div id="result-screen" class="screen hidden p-6 md:p-8">
            <!-- Retângulo Superior com o Título -->
            <div id="result-title-container" class="p-4 rounded-lg text-center mb-6">
                <h2 id="result-title" class="text-xl md:text-2xl font-bold text-white"></h2>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <!-- Quadrado Esquerdo: Diagnóstico -->
                <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                    <h3 class="font-bold text-gray-800 mb-2">Seu Diagnóstico:</h3>
                    <p id="result-description" class="text-gray-600 text-sm"></p>
                </div>
                <!-- Quadrado Direito: Pontuação -->
                <div id="result-score-container" class="p-4 rounded-lg flex flex-col items-center justify-center">
                    <h3 class="font-bold text-white mb-1">Pontuação de Risco</h3>
                    <p id="result-score" class="text-5xl font-bold text-white"></p>
                </div>
            </div>

            <div class="mt-6 text-center">
                <p class="font-bold text-gray-800">Qual o próximo passo?</p>
                <p id="result-cta" class="text-gray-600 mt-2"></p>
            </div>

            <div class="mt-6">
                <label for="phone" class="block text-sm font-medium text-gray-700 mb-2">Receba uma análise gratuita do seu caso. Deixe seu telefone que entraremos em contato:</label>
                <div class="flex">
                    <input type="tel" id="phone" name="phone" class="flex-grow p-3 border border-gray-300 rounded-l-lg focus:ring-blue-500 focus:border-blue-500" placeholder="(XX) XXXXX-XXXX">
                    <button id="submit-phone" class="bg-blue-600 text-white font-bold p-3 rounded-r-lg hover:bg-blue-700 transition-colors">Enviar</button>
                </div>
                <p id="thank-you-message" class="text-center text-green-600 font-medium mt-4 hidden">Obrigado! Em breve nossa equipe entrará em contato.</p>
            </div>
        </div>
    </div>

    <script>
        // --- ELEMENTOS DO DOM ---
        const startScreen = document.getElementById('start-screen');
        const quizScreen = document.getElementById('quiz-screen');
        const resultScreen = document.getElementById('result-screen');
        
        const startButton = document.getElementById('start-button');
        const backButton = document.getElementById('back-button');
        
        const questionCounter = document.getElementById('question-counter');
        const progressBar = document.getElementById('progress-bar');
        const questionText = document.getElementById('question-text');
        const answersContainer = document.getElementById('answers-container');

        const resultTitleContainer = document.getElementById('result-title-container');
        const resultTitle = document.getElementById('result-title');
        const resultDescription = document.getElementById('result-description');
        const resultScoreContainer = document.getElementById('result-score-container');
        const resultScore = document.getElementById('result-score');
        const resultCta = document.getElementById('result-cta');

        const phoneInput = document.getElementById('phone');
        const submitPhoneButton = document.getElementById('submit-phone');
        const thankYouMessage = document.getElementById('thank-you-message');

        // --- DADOS DO QUIZ ---
        const quizData = [
            {
                question: "Qual seu status de visto nos EUA agora?",
                answers: [
                    { text: "Visto válido, cumprindo as regras", score: 10 },
                    { text: "Turista, dentro do prazo", score: 25 },
                    { text: "Irregular há menos de 180 dias", score: 60 },
                    { text: "Irregular há mais de 180 dias", score: 90 }
                ]
            },
            {
                question: "Quem te orienta sobre seu futuro nos EUA?",
                answers: [
                    { text: "Advogado(a) licenciado(a)", score: 10 },
                    { text: "Busco informações sozinho(a)", score: 50 },
                    { text: "Um 'notário' ou amigo", score: 90 },
                    { text: "Ninguém, estou sem direção", score: 70 }
                ]
            },
            {
                question: "Você já teve algum problema com a lei nos EUA?",
                answers: [
                    { text: "Não, nenhum", score: 10 },
                    { text: "Apenas infrações leves de trânsito", score: 20 },
                    { text: "Sim, tive um registro policial", score: 70 },
                    { text: "Sim, já fui detido(a) ou procesado(a)", score: 100 }
                ]
            },
            {
                question: "Qual sua qualificação profissional?",
                answers: [
                    { text: "Superior completo +5 anos de exp.", score: 10 },
                    { text: "Superior completo ou exp. qualificada", score: 25 },
                    { text: "Trabalho em funções sem qualificação", score: 50 },
                    { text: "Não consigo comprovar formação/exp.", score: 60 }
                ]
            },
            {
                question: "Você já deu entrada em algum processo de imigração antes?",
                answers: [
                    { text: "Sim, e está correndo normalmente", score: 10 },
                    { text: "Não, nunca apliquei", score: 30 },
                    { text: "Sim, e recebi um pedido de evidências (RFE)", score: 70 },
                    { text: "Sim, e tive o processo negado", score: 90 }
                ]
            },
            {
                question: "Se recebesse uma carta da imigração amanhã, você saberia o que fazer?",
                answers: [
                    { text: "Sim, meu advogado cuidaria disso", score: 10 },
                    { text: "Procuraria um advogado imediatamente", score: 25 },
                    { text: "Entraria em pânico, sem saber a quem recorrer", score: 80 },
                    { text: "Provavelmente ignoraria por medo", score: 100 }
                ]
            },
            {
                question: "Olhando para seu futuro nos EUA, o que você sente?",
                answers: [
                    { text: "Confiança, tenho um plano claro", score: 10 },
                    { text: "Esperança, mas sem saber o próximo passo", score: 40 },
                    { text: "Ansiedade, sinto que estou em uma corda bamba", score: 80 }
                ]
            }
        ];

        // --- ESTADO DO QUIZ ---
        let currentQuestionIndex = 0;
        let userAnswers = [];

        // --- FUNÇÕES ---

        function startQuiz() {
            currentQuestionIndex = 0;
            userAnswers = [];
            showScreen(quizScreen);
            displayQuestion();
        }

        function displayQuestion() {
            if (currentQuestionIndex >= quizData.length) {
                showResult();
                return;
            }

            const question = quizData[currentQuestionIndex];
            
            // Atualiza contador e barra de progresso
            questionCounter.textContent = `Pergunta ${currentQuestionIndex + 1} de ${quizData.length}`;
            const progress = ((currentQuestionIndex) / quizData.length) * 100;
            progressBar.style.width = `${progress}%`;
            
            questionText.textContent = question.question;
            answersContainer.innerHTML = ''; // Limpa respostas anteriores

            // Cria botões de resposta
            question.answers.forEach((answer, index) => {
                const button = document.createElement('button');
                button.textContent = answer.text;
                button.className = "w-full text-left p-4 border border-gray-300 rounded-lg hover:bg-blue-50 hover:border-blue-400 transition-all duration-200";
                button.onclick = () => selectAnswer(index, answer.score);
                answersContainer.appendChild(button);
            });

            // Esconde o botão voltar na primeira pergunta
            backButton.classList.toggle('hidden', currentQuestionIndex === 0);
        }

        function selectAnswer(answerIndex, score) {
            userAnswers[currentQuestionIndex] = { index: answerIndex, score: score };
            currentQuestionIndex++;
            // Efeito de fade out para a próxima pergunta
            quizScreen.style.opacity = 0;
            setTimeout(() => {
                displayQuestion();
                quizScreen.style.opacity = 1;
            }, 300);
        }

        function goBack() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                userAnswers.pop();
                quizScreen.style.opacity = 0;
                setTimeout(() => {
                    displayQuestion();
                    quizScreen.style.opacity = 1;
                }, 300);
            }
        }

        function showResult() {
            const totalScore = userAnswers.reduce((sum, answer) => sum + answer.score, 0);
            const averageScore = Math.round(totalScore / userAnswers.length);
            
            let result;
            if (averageScore <= 25) {
                result = {
                    title: "❄️ ZONA FRIA - No Caminho da Segurança",
                    description: "Você está tomando decisões conscientes e está no caminho certo para a estabilidade. Seu risco de deportação é baixo.",
                    cta: "Seu foco agora deve ser em fortalecer e acelerar seu processo. Agende uma avaliação estratégica para garantir que seu caso seja apresentado da forma mais robusta possível.",
                    bgColor: "bg-blue-600",
                    scoreColor: "bg-blue-500"
                };
            } else if (averageScore <= 50) {
                result = {
                    title: "😐 ZONA NEUTRA - Ponto de Virada",
                    description: "Você está em um momento crucial. Seu perfil tem potencial, mas a falta de um plano claro te deixa vulnerável. Qualquer passo em falso pode te levar à zona de risco.",
                    cta: "A clareza é o que vai te tirar da incerteza. Peça uma Análise de Perfil Gratuita e descubra os caminhos LEGAIS que existem para você.",
                    bgColor: "bg-yellow-500",
                    scoreColor: "bg-yellow-400"
                };
            } else if (averageScore <= 80) {
                result = {
                    title: "🔥 ZONA QUENTE - Alerta de Risco",
                    description: "O termômetro indica que você está em uma situação de vulnerabilidade. A combinação de um status irregular com a falta de orientação é perigosa.",
                    cta: "Ignorar a situação é o maior erro. Aja agora, antes que uma notificação oficial chegue. Agende uma consulta de avaliação de risco para criarmos um plano de contenção.",
                    bgColor: "bg-orange-500",
                    scoreColor: "bg-orange-400"
                };
            } else {
                result = {
                    title: "🔥🔥🔥 ZONA MUITO QUENTE - Risco Iminente",
                    description: "Seu resultado é um sinal de alerta máximo. Os fatores indicam um risco iminente de deportação. A situação é extremamente séria.",
                    cta: "Não há tempo a perder. Você precisa de orientação legal especializada e urgente. Agende uma consulta confidencial de emergência para traçarmos uma estratégia de defesa.",
                    bgColor: "bg-red-600",
                    scoreColor: "bg-red-500"
                };
            }

            resultTitle.textContent = result.title;
            resultDescription.textContent = result.description;
            resultCta.textContent = result.cta;
            resultScore.textContent = averageScore;

            // Remove classes de cor antigas e adiciona as novas
            resultTitleContainer.className = `p-4 rounded-lg text-center mb-6 ${result.bgColor}`;
            resultScoreContainer.className = `p-4 rounded-lg flex flex-col items-center justify-center ${result.scoreColor}`;

            showScreen(resultScreen);
        }

        function showScreen(screenToShow) {
            // Esconde todas as telas e depois mostra a desejada
            startScreen.classList.add('hidden');
            quizScreen.classList.add('hidden');
            resultScreen.classList.add('hidden');
            
            screenToShow.classList.remove('hidden');
        }

        function handlePhoneSubmit() {
            const phone = phoneInput.value;
            // Validação simples
            if (phone.length > 8) {
                // Aqui você integraria com uma API para enviar o lead (ex: Google Sheets, CRM)
                console.log(`Telefone capturado: ${phone}`);
                
                phoneInput.disabled = true;
                submitPhoneButton.disabled = true;
                submitPhoneButton.textContent = 'Enviado!';
                submitPhoneButton.classList.remove('bg-blue-600', 'hover:bg-blue-700');
                submitPhoneButton.classList.add('bg-green-600');
                thankYouMessage.classList.remove('hidden');
            } else {
                alert('Por favor, insira um número de telefone válido.');
            }
        }

        // --- EVENT LISTENERS ---
        startButton.addEventListener('click', startQuiz);
        backButton.addEventListener('click', goBack);
        submitPhoneButton.addEventListener('click', handlePhoneSubmit);

        // Inicia na tela de start
        showScreen(startScreen);
    </script>
</body>
</html>
